
version: "3"

networks:
  net:
    driver: bridge

services:
  godot_bridge:
    image: ${BRIDGE_IMAGE}
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: '1g'
    ports:
      - "9050:9050"
      - "30001:30001" # ZMQ port for feagi to connect for Gadot
    env_file:
      - ./.env
    privileged: true
    networks:
      - net
    depends_on:
      - feagi

  webcam_javascript_controller:
    image: ${WEBCAM_CONTROLLER_IMAGE}
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: '2g'
    ports:
      - "9051:9051"
    env_file:
      - ./.env
    privileged: true
    networks:
      - net
    depends_on:
      - feagi

  feagi:
    image: ${FEAGI_IMAGE}
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: '2g'
    ports:
      - "8000:8000"
      - "30000:30000"
      - "40000-40050:40000-40050"
#      - "10000-10050:10000-10050" # ZMQ Port for Agent to Connect to Feagi
    env_file:
      - ./.env
    networks:
      - net

  brain_pong_controller:
    image: ${BRAIN_PONG_IMAGE}
    ports:
      - "9055:9055"
    env_file:
      - ./.env
    privileged: true
    networks:
      - net 

  microbit_controller:
    image: ${MICROBIT_IMAGE}
    ports:
      - "9052:9052"
    env_file:
      - ./.env
    privileged: true
    networks:
      - net


  playground:
    image: ${PLAYGROUND_IMAGE}
    ports:
      - "4000:4000"
    privileged: true
    networks:
      - net

volumes:
  grafana_data:
  influxdb_data:
